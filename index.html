<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="index.js"> -->
    <title>Tugas</title>
</head>
<body>
    <h1> Tugas 4</h1>
    <p> 1. Get</p>
    <p> 2. Post</p>
    <p> 3. Put</p>
    <p> 4. Delete</p>
    <p> 5. API yang diakses menggunakan token</p>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        //1. Get
        axios.get('https://dummyjson.com/todos/1')
        .then(response => {
        // Menangani respons dari server
            console.log("Response:", response.data);
        })
        .catch(error => {
        // Menangani error dari server
            console.error('Error:', error);
        })

        //2. Post
        const postData = {
            id: 151,
            todo: "Use DummyJSON in the project Alya",
            completed: false,
            userId: 5
        }
        axios.post('https://dummyjson.com/todos/add', postData)
        .then(response => {
        // Menangani respons dari server
            console.log("Response:", response.data);
        })
        .catch(error => {
        // Menangani error dari server
            console.error('Error:', error);
        })

        //3. Put
        const putData = {
            id: "1",
            todo: "Do something nice for me",
            completed: false, // complete status was changed
            userId: 26
        }
        axios.put('https://dummyjson.com/todos/1', putData)
        .then(response => {
        // Menangani respons dari server
            console.log("Response:", response.data);
        })
        .catch(error => {
        // Menangani error dari server
            console.error('Error:', error);
        })

        //4. Delete
        axios.delete('https://dummyjson.com/todos/1')
        .then(response => {
        // Menangani respons dari server
            console.log("Response:", response.data);
        })
        .catch(error => {
        // Menangani error dari server
            console.error('Error:', error);
        })


        //5. // Mengambil token menggunakan Axios
        axios.post('https://dummyjson.com/auth/login', {
            username: 'emilys',
            password: 'emilyspass'
        })
        .then(res =>{ 
            axios.get('https://dummyjson.com/auth/me', {
                headers: {
                    authorization : 'Bearer ' + res.data.token //digabung biar tokennya ga ganti ganti, karna yang sebelumnya tokennya pasti ganti trs tiap dirun
                }
            })
            .then(res => console.log(res.data))
        })




        // //Setelah login, buat constanta token untuk akses isi dari username dan pass tsb
        // const token = axios.create({
        //     baseURL:'https://dummyjson.com/auth/me',
        //     headers:{
        //         'Authorization':'Bearer'

        //     }
        // })
        // token.get()
        // .then(res => console.log(res.data))
    </script>
</body>
</html>